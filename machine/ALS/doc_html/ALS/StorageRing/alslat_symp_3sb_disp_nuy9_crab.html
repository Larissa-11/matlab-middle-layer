<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of alslat_symp_3sb_disp_nuy9_crab</title>
  <meta name="keywords" content="alslat_symp_3sb_disp_nuy9_crab">
  <meta name="description" content="Lattice definition file">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">ALS</a> &gt; <a href="index.html">StorageRing</a> &gt; alslat_symp_3sb_disp_nuy9_crab.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for ALS\StorageRing&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>alslat_symp_3sb_disp_nuy9_crab
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>Lattice definition file</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function alslat_symp_3sb_disp_nuy9 </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Lattice definition file
 Compiled by Christoph Steier from the ALS TRACY 
 lattice file of Nishimura/Robin/Steier 04/20/2000 

 ALS production lattice, quadrupole families, one bend family,
 two sextupole families, BPMs as markers, no correctors, 
 eta_x  6cm, nu_y = 9.20.

 Modifications :
 Laurent Nadolski, August 2001

 correction for right path length
 correction for QDA length
 new effective SB length 
 normal bend entrance/exit angle set to 5 degrees
 tunes to 14.25 9.2
 chromaticities to 0.4 1.4</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function alslat_symp_3sb_disp_nuy9</a>
0002 <span class="comment">% Lattice definition file</span>
0003 <span class="comment">% Compiled by Christoph Steier from the ALS TRACY</span>
0004 <span class="comment">% lattice file of Nishimura/Robin/Steier 04/20/2000</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% ALS production lattice, quadrupole families, one bend family,</span>
0007 <span class="comment">% two sextupole families, BPMs as markers, no correctors,</span>
0008 <span class="comment">% eta_x  6cm, nu_y = 9.20.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% Modifications :</span>
0011 <span class="comment">% Laurent Nadolski, August 2001</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% correction for right path length</span>
0014 <span class="comment">% correction for QDA length</span>
0015 <span class="comment">% new effective SB length</span>
0016 <span class="comment">% normal bend entrance/exit angle set to 5 degrees</span>
0017 <span class="comment">% tunes to 14.25 9.2</span>
0018 <span class="comment">% chromaticities to 0.4 1.4</span>
0019 
0020 
0021 <span class="keyword">global</span> FAMLIST THERING GLOBVAL
0022 GLOBVAL.E0 = 1.9e9;
0023 GLOBVAL.LatticeFile = <span class="string">'alslat_symp_3sb_disp_nuy9'</span>;
0024 FAMLIST = cell(0);
0025 
0026 disp(<span class="string">'** Loading ALS lattice in alslat_symp_3sb_disp_nuy9.m **'</span>);
0027 
0028 AP =  aperture(<span class="string">'AP'</span>,  [-0.1, 0.1, -0.1, 0.1], <span class="string">'AperturePass'</span>);
0029 
0030 
0031 L0 =  196.805415;    <span class="comment">% design length [m]</span>
0032 C0 =   299792458;                 <span class="comment">% speed of light [m/s]</span>
0033 HarmNumber = 328;
0034 
0035 <span class="comment">%% Cavity</span>
0036 <span class="comment">%                   NAME    L     U[V]       f[Hz]            h            method</span>
0037 CAV    = rfcavity(<span class="string">'CAV1'</span> , 0 , 1.5e+6 , HarmNumber*C0/L0, HarmNumber ,<span class="string">'ThinCavityPass'</span>);   
0038 
0039 <span class="comment">%% crab cavity</span>
0040 CRABCAV=crabcavity(<span class="string">'CRABCAV'</span>, -0.0179, 1.5e6, 3*HarmNumber*C0/L0, <span class="string">'ThinCrabCavityPass'</span>);
0041 
0042 <span class="comment">%% Marker and apertures</span>
0043    SECT1 =  marker(<span class="string">'SECT1'</span>, <span class="string">'IdentityPass'</span>);
0044    SECT2 =  marker(<span class="string">'SECT2'</span>, <span class="string">'IdentityPass'</span>);
0045    SECT3 =  marker(<span class="string">'SECT3'</span>, <span class="string">'IdentityPass'</span>);
0046    SECT4 =  marker(<span class="string">'SECT4'</span>, <span class="string">'IdentityPass'</span>);
0047    SECT5 =  marker(<span class="string">'SECT5'</span>, <span class="string">'IdentityPass'</span>);
0048    SECT6 =  marker(<span class="string">'SECT6'</span>, <span class="string">'IdentityPass'</span>);
0049    SECT7 =  marker(<span class="string">'SECT7'</span>, <span class="string">'IdentityPass'</span>);
0050    SECT8 =  marker(<span class="string">'SECT8'</span>, <span class="string">'IdentityPass'</span>);
0051    SECT9 =  marker(<span class="string">'SECT9'</span>, <span class="string">'IdentityPass'</span>);
0052    SECT10 =  marker(<span class="string">'SECT10'</span>, <span class="string">'IdentityPass'</span>);
0053    SECT11 =  marker(<span class="string">'SECT11'</span>, <span class="string">'IdentityPass'</span>);
0054    SECT12 =  marker(<span class="string">'SECT12'</span>, <span class="string">'IdentityPass'</span>);
0055    BL31 =  marker(<span class="string">'BL31'</span>, <span class="string">'IdentityPass'</span>);
0056    FIN =  marker(<span class="string">'FIN'</span>, <span class="string">'IdentityPass'</span>);
0057    pos31 =  marker(<span class="string">'pos31'</span>, <span class="string">'IdentityPass'</span>);
0058    posScrapH =  marker(<span class="string">'posScrapH'</span>, <span class="string">'IdentityPass'</span>);
0059    posScrapB =  marker(<span class="string">'posScrapB'</span>, <span class="string">'IdentityPass'</span>);
0060    posScrapT =  marker(<span class="string">'posScrapT'</span>, <span class="string">'IdentityPass'</span>);
0061    BPM =  marker(<span class="string">'BPM'</span>, <span class="string">'IdentityPass'</span>);
0062    INJ = aperture(<span class="string">'INJ'</span>,[-0.03 0.03 -0.004 0.004],<span class="string">'AperturePass'</span>);
0063    
0064 <span class="comment">% DRIFT SPACES</span>
0065    L1 = drift(<span class="string">'L1'</span>,  2.832695, <span class="string">'DriftPass'</span>);
0066    L2 = drift(<span class="string">'L2'</span>,  0.45698, <span class="string">'DriftPass'</span>);
0067    L1crab = drift(<span class="string">'L1crab'</span>,  2.832695-0.221, <span class="string">'DriftPass'</span>);
0068    L2crab = drift(<span class="string">'L2crab'</span>,  0.45698+0.221, <span class="string">'DriftPass'</span>);
0069    L3 = drift(<span class="string">'L3'</span>,  0.08902, <span class="string">'DriftPass'</span>);
0070    L4 = drift(<span class="string">'L4'</span>,  0.2155, <span class="string">'DriftPass'</span>);
0071    L5 = drift(<span class="string">'L5'</span>,  0.219, <span class="string">'DriftPass'</span>);
0072    L6 = drift(<span class="string">'L6'</span>,  0.107078, <span class="string">'DriftPass'</span>);
0073    L7 = drift(<span class="string">'L7'</span>,  0.105716, <span class="string">'DriftPass'</span>);
0074    L8 = drift(<span class="string">'L8'</span>,  0.135904, <span class="string">'DriftPass'</span>);
0075    L9 = drift(<span class="string">'L9'</span>,  0.2156993, <span class="string">'DriftPass'</span>);
0076    L10 = drift(<span class="string">'L10'</span>,  0.089084, <span class="string">'DriftPass'</span>);
0077    L11 = drift(<span class="string">'L11'</span>,  0.235416, <span class="string">'DriftPass'</span>);
0078    L12 = drift(<span class="string">'L12'</span>,  0.1245, <span class="string">'DriftPass'</span>);
0079    L13 = drift(<span class="string">'L13'</span>,  0.511844, <span class="string">'DriftPass'</span>);
0080    L14 = drift(<span class="string">'L14'</span>,  0.1788541, <span class="string">'DriftPass'</span>);
0081    L15 = drift(<span class="string">'L15'</span>,  0.1788483, <span class="string">'DriftPass'</span>);
0082    L16 = drift(<span class="string">'L16'</span>,  0.511849, <span class="string">'DriftPass'</span>);
0083    L17 = drift(<span class="string">'L17'</span>,  0.1245, <span class="string">'DriftPass'</span>);
0084    L18 = drift(<span class="string">'L18'</span>,  0.235405, <span class="string">'DriftPass'</span>);
0085    L19 = drift(<span class="string">'L19'</span>,  0.089095, <span class="string">'DriftPass'</span>);
0086    L20 = drift(<span class="string">'L20'</span>,  0.2157007, <span class="string">'DriftPass'</span>);
0087    L21 = drift(<span class="string">'L21'</span>,  0.177716, <span class="string">'DriftPass'</span>);
0088    L22 = drift(<span class="string">'L22'</span>,  0.170981, <span class="string">'DriftPass'</span>);
0089    L23 = drift(<span class="string">'L23'</span>,  0.218997, <span class="string">'DriftPass'</span>);
0090    L24 = drift(<span class="string">'L24'</span>,  0.215503, <span class="string">'DriftPass'</span>);
0091    L25 = drift(<span class="string">'L25'</span>,  0.0890187, <span class="string">'DriftPass'</span>);
0092    L26 = drift(<span class="string">'L26'</span>,  0.45698, <span class="string">'DriftPass'</span>);
0093    L27 = drift(<span class="string">'L27'</span>,  2.832696, <span class="string">'DriftPass'</span>);
0094    L26crab = drift(<span class="string">'L26crab'</span>,  0.45698+0.22, <span class="string">'DriftPass'</span>);
0095    L27crab = drift(<span class="string">'L27crab'</span>,  2.832696-0.22, <span class="string">'DriftPass'</span>);
0096    L27a = drift(<span class="string">'L27a'</span>,  0.8596, <span class="string">'DriftPass'</span>);
0097    L27b = drift(<span class="string">'L27b'</span>,  0.1524, <span class="string">'DriftPass'</span>);
0098    L27c = drift(<span class="string">'L27c'</span>,  0.04445, <span class="string">'DriftPass'</span>);
0099    L27d = drift(<span class="string">'L27d'</span>,  1.776246, <span class="string">'DriftPass'</span>);
0100    DS = drift(<span class="string">'DS'</span>, 0.1015, <span class="string">'DriftPass'</span>);
0101    LS1 = drift(<span class="string">'LS1'</span>, 0.23, <span class="string">'DriftPass'</span>);
0102 <span class="comment">%   LS1 = drift('LS1', 0.229768, 'DriftPass');</span>
0103    LS2 = drift(<span class="string">'LS2'</span>, 0.095076, <span class="string">'DriftPass'</span>);
0104    LS3 = drift(<span class="string">'LS3'</span>, 0.484594, <span class="string">'DriftPass'</span>);
0105    LS4 = drift(<span class="string">'LS4'</span>, 0.484594, <span class="string">'DriftPass'</span>);
0106    LS5 = drift(<span class="string">'LS5'</span>, 0.095076, <span class="string">'DriftPass'</span>);
0107 
0108 
0109 <span class="comment">% QUADRUPOLES</span>
0110 QF        =    quadrupole(<span class="string">'QF'</span>  , 0.344, 2.237111 ,<span class="string">'StrMPoleSymplectic4RadPass'</span>);
0111 QD        =    quadrupole(<span class="string">'QD'</span>  , 0.187, -2.511045 ,<span class="string">'StrMPoleSymplectic4RadPass'</span>);
0112 QFA        =    quadrupole(<span class="string">'QFA'</span>  , 0.448,  2.954352,<span class="string">'StrMPoleSymplectic4RadPass'</span>);
0113 QDA        =    quadrupole(<span class="string">'QDA'</span>  , 0.187,  -1.779475,<span class="string">'StrMPoleSymplectic4RadPass'</span>);
0114 
0115 
0116 <span class="comment">% SEXTUPOLES for xix=0.4 and xi_y=1.4</span>
0117 <span class="comment">% -52.246310 74.801936 w/o sextu in superbend</span>
0118 <span class="comment">% -52.03     75.05     w/  sextu in superbend</span>
0119 SD   =  sextupole(<span class="string">'SD'</span>, 0.2030, -52.0333, <span class="string">'StrMPoleSymplectic4RadPass'</span>);
0120 SF   =  sextupole(<span class="string">'SF'</span>, 0.2030,  75.0479, <span class="string">'StrMPoleSymplectic4RadPass'</span>);
0121 
0122 
0123 <span class="comment">% DIPOLES (COMBINED FUNCTION)</span>
0124 <span class="comment">% K1= -0.7782 for 5 degrees instead of -0.81 for 3 degrees entrance/exit angle</span>
0125 BEND  =  rbend(<span class="string">'BEND'</span>  , 0.86514,  <span class="keyword">...</span>
0126             0.1745329, 0.0872665, 0.0872665, -0.7782,<span class="string">'BndMPoleSymplectic4RadPass'</span>);
0127 
0128 <span class="comment">% Super bend L=255 mm for SBM1 and 254 mm for SBM3 and 4 (cf. field clamps)</span>
0129 BS    =  rbend(<span class="string">'BS'</span>, 0.255, <span class="keyword">...</span>
0130             0.1745329, 0.0872665, 0.0872665, 0,<span class="string">'BndMPoleSymplectic4RadPass'</span>);
0131          
0132 <span class="comment">% Begin Lattice</span>
0133 
0134 <span class="comment">%%  Scraper Half-Straight</span>
0135 
0136 L27s = [L27a posScrapH L27b posScrapB L27c posScrapT L27d];
0137 
0138 <span class="comment">%%  Superperiods</span>
0139 
0140 SUP  = [   L1 L2 BPM L3 QF L4 L5 QD  <span class="keyword">...</span>
0141            L6 BPM L7 L8 BEND L9 SD L10 <span class="keyword">...</span><span class="comment"> </span>
0142            BPM L11 QFA L12  SF L13 BPM  <span class="keyword">...</span>
0143            L14 BEND L15 BPM L16  SF  L17  <span class="keyword">...</span>
0144            QFA L18 BPM L19  SD L20 BEND L21 <span class="keyword">...</span><span class="comment"> </span>
0145            BPM L22 QD L23  L24 QF L25  <span class="keyword">...</span>
0146            BPM L26  L27 ];
0147 SUPCRAB  = [   L1crab CRABCAV L2crab BPM L3 QF L4 L5 QD  <span class="keyword">...</span>
0148            L6 BPM L7 L8 BEND L9 SD L10 <span class="keyword">...</span><span class="comment"> </span>
0149            BPM L11 QFA L12  SF L13 BPM  <span class="keyword">...</span>
0150            L14 BEND L15 BPM L16  SF  L17  <span class="keyword">...</span>
0151            QFA L18 BPM L19  SD L20 BEND L21 <span class="keyword">...</span><span class="comment"> </span>
0152            BPM L22 QD L23  L24 QF L25  <span class="keyword">...</span>
0153            BPM L26crab CRABCAV  L27crab ];
0154 SUPS  = [   L1 L2 BPM L3 QF L4 L5 QD  <span class="keyword">...</span>
0155            L6 BPM L7 L8 BEND L9 SD L10 <span class="keyword">...</span><span class="comment"> </span>
0156            BPM L11 QFA L12  SF LS1 QDA LS2 BPM  <span class="keyword">...</span>
0157            LS3 BS LS4 BPM LS5 QDA LS1  SF  L17  <span class="keyword">...</span>
0158            QFA L18 BPM L19  SD L20 BEND L21 <span class="keyword">...</span><span class="comment"> </span>
0159            BPM L22 QD L23  L24 QF L25  <span class="keyword">...</span>
0160            BPM L26  L27 ];
0161            
0162 ELIST = [INJ SECT1 SUP SECT2 SUP SECT3 CAV SUP SECT4 SUPS SECT5 SUP SECT6 SUPCRAB <span class="keyword">...</span>
0163     SECT7 SUP SECT8 SUPS SECT9 SUP SECT10 SUP SECT11 SUP SECT12 SUPS FIN];
0164 
0165 THERING=cell(size(ELIST));
0166 <span class="keyword">for</span> i=1:length(THERING)
0167    THERING{i} = FAMLIST{ELIST(i)}.ElemData;
0168    FAMLIST{ELIST(i)}.NumKids=FAMLIST{ELIST(i)}.NumKids+1;
0169    FAMLIST{ELIST(i)}.KidsList = [FAMLIST{ELIST(i)}.KidsList i];
0170 <span class="keyword">end</span>
0171 
0172 QFI = findcells(THERING,<span class="string">'FamName'</span>,<span class="string">'QF'</span>);
0173 THERING = setcellstruct(THERING,<span class="string">'K'</span>,QFI([7:8 15:16 23:24]),2.219784);
0174 THERING = setcellstruct(THERING,<span class="string">'PolynomB'</span>,QFI([7:8 15:16 23:24]),2.219784,2);
0175 QDI = findcells(THERING,<span class="string">'FamName'</span>,<span class="string">'QD'</span>);
0176 THERING = setcellstruct(THERING,<span class="string">'K'</span>,QDI([7:8 15:16 23:24]),-2.483259);
0177 THERING = setcellstruct(THERING,<span class="string">'PolynomB'</span>,QDI([7:8 15:16 23:24]),-2.483259,2);
0178 QFAI = findcells(THERING,<span class="string">'FamName'</span>,<span class="string">'QFA'</span>);
0179 THERING = setcellstruct(THERING,<span class="string">'K'</span>,QFAI([7:8 15:16 23:24]),3.120815);
0180 THERING = setcellstruct(THERING,<span class="string">'PolynomB'</span>,QFAI([7:8 15:16 23:24]),3.120815,2);
0181 
0182 <span class="comment">%% set the SB sextupole component strengths</span>
0183 BSI = findcells(THERING,<span class="string">'FamName'</span>,<span class="string">'BS'</span>);
0184 THERING = setcellstruct(THERING,<span class="string">'PolynomB'</span>,BSI,-22.68,3);
0185 
0186 <span class="comment">%% compute total length and RF frequency</span>
0187 
0188 L0_tot=0;
0189 <span class="keyword">for</span> i=1:length(THERING)
0190    L0_tot=L0_tot+THERING{i}.Length;
0191 <span class="keyword">end</span>
0192 
0193 fprintf(<span class="string">'\nL0_tot=%.6f m (should be 196.805415 m) \nf_RF=%.6f MHz (should be 499.640349 Hz)\n\n'</span>,L0_tot,HarmNumber*C0/L0_tot/1e6)
0194 
0195 <span class="comment">%% Compute initial tunes before loading errors</span>
0196 [InitialTunes, InitialChro]= tunechrom(THERING,0,[14.25, 9.2],<span class="string">'chrom'</span>,<span class="string">'coupling'</span>);
0197 
0198 fprintf(<span class="string">'Tunes and chromaticities are calculated slightly incorrectly since radiation and cavity are on\n'</span>);
0199 fprintf(<span class="string">'Tunes before loading lattice errors: nu_x=%g, nu_y=%g\n'</span>,InitialTunes(1),InitialTunes(2));
0200 fprintf(<span class="string">'Chroma before loading lattice errors: xi_x=%g, xi_y=%g\n'</span>,InitialChro(1),InitialChro(2));
0201 
0202 <span class="comment">% evalin('caller','global THERING FAMLIST GLOBVAL');</span>
0203 <span class="comment">% evalin('base','global THERING FAMLIST GLOBVAL');</span></pre></div>
<hr><address>Generated on Thu 02-Aug-2007 13:16:07 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>